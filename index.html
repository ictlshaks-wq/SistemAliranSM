<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Penentuan Aliran Menengah Atas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #f8fafc;
        }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 10px; }

        .tile-content {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Penambahan ketebalan border apabila di-klik */
        .subject-checkbox:checked + .tile-content {
            border-width: 4px !important;
            border-color: currentColor;
            background-color: rgba(var(--bg-rgb), 0.1);
            transform: translateY(-3px);
            box-shadow: 0 15px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .mandatory-glow {
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(251, 191, 36, 0.5); }
            50% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.8); }
            100% { box-shadow: 0 0 5px rgba(251, 191, 36, 0.5); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }

        .active-tab {
            background-color: #fbbf24;
            color: #003366;
            font-weight: 800;
        }
    </style>
</head>
<body class="min-h-screen pb-20">

    <!-- Bahagian Pengepala (Header) -->
    <header class="bg-[#003366] text-white pt-16 pb-32 px-6 relative overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none">
                <rect x="0" y="0" width="100" height="50" fill="#fbbf24" />
            </svg>
        </div>
        <div class="max-w-7xl mx-auto relative z-10 text-center md:text-left">
            <div class="flex flex-col md:flex-row items-center gap-4 mb-8">
                <div class="p-3 bg-white rounded-2xl shadow-2xl border-4 border-yellow-400">
                    <i data-lucide="building-2" class="w-8 h-8 text-[#003366]"></i>
                </div>
                <div>
                    <span class="text-yellow-400 font-black tracking-[0.2em] text-sm uppercase block mb-1">
                        JABATAN PENDIDIKAN NEGERI PAHANG
                    </span>
                    <h1 class="text-3xl md:text-5xl font-black tracking-tight leading-tight uppercase">
                        Sistem Penentuan Aliran <br>
                        <span class="text-yellow-400">Menengah Atas</span>
                    </h1>
                </div>
            </div>
            
            <!-- Navigasi Tab -->
            <div class="flex gap-2 mt-8 justify-center md:justify-start">
                <button onclick="switchView('calculator')" id="tab-calculator" class="px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400/30 transition-all active-tab shadow-lg">
                    KALKULATOR
                </button>
                <button onclick="switchView('guide')" id="tab-guide" class="px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400/30 transition-all text-yellow-400 hover:bg-yellow-400/10">
                    PANDUAN ALIRAN
                </button>
            </div>
        </div>
    </header>

    <!-- Bekas Kandungan Utama -->
    <main class="max-w-7xl mx-auto px-6 -mt-16 relative z-20">
        
        <!-- PAPARAN KALKULATOR -->
        <div id="view-calculator" class="flex flex-col lg:flex-row gap-8 animate-slide-up">
            <!-- Bahagian Kiri: Pemilihan Interaktif -->
            <div class="flex-1 space-y-10">
                <!-- Kad Subjek Wajib -->
                <div class="bg-white p-8 rounded-[2.5rem] border-t-8 border-yellow-400 shadow-2xl">
                    <div class="flex items-center gap-3 mb-6">
                        <i data-lucide="award" class="w-6 h-6 text-yellow-500"></i>
                        <h2 class="text-xs font-black text-slate-400 uppercase tracking-widest">Mata Pelajaran Universal (Wajib Ambil)</h2>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <div class="px-5 py-4 bg-slate-50 border border-slate-100 text-[#003366] rounded-2xl text-sm font-black flex flex-col items-center gap-2 text-center">
                            <i data-lucide="check-circle-2" class="w-5 h-5 text-emerald-500"></i> B. Melayu
                        </div>
                        <div class="px-5 py-4 bg-slate-50 border border-slate-100 text-[#003366] rounded-2xl text-sm font-black flex flex-col items-center gap-2 text-center">
                            <i data-lucide="check-circle-2" class="w-5 h-5 text-emerald-500"></i> B. Inggeris
                        </div>
                        <div class="px-5 py-4 bg-slate-50 border border-slate-100 text-[#003366] rounded-2xl text-sm font-black flex flex-col items-center gap-2 text-center">
                            <i data-lucide="check-circle-2" class="w-5 h-5 text-emerald-500"></i> Matematik
                        </div>
                        <div class="px-5 py-4 bg-slate-50 border border-slate-100 text-[#003366] rounded-2xl text-sm font-black flex flex-col items-center gap-2 text-center">
                            <i data-lucide="check-circle-2" class="w-5 h-5 text-emerald-500"></i> Sejarah
                        </div>
                    </div>
                </div>

                <!-- Kumpulan Sains Tulen -->
                <section class="space-y-6">
                    <div class="flex items-center gap-4">
                        <div class="p-3 bg-emerald-600 text-white rounded-2xl shadow-lg shadow-emerald-200">
                            <i data-lucide="flask-conical" class="w-6 h-6"></i>
                        </div>
                        <h2 class="text-2xl font-black text-slate-800 tracking-tight">Kumpulan Sains Tulen</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="relative cursor-pointer group">
                            <input type="checkbox" value="Biologi" class="peer hidden subject-checkbox" onchange="calculatePackage()">
                            <div class="tile-content p-6 bg-white border-2 border-slate-100 rounded-[2rem] flex items-center gap-5 transition-all peer-checked:border-emerald-500 peer-checked:bg-emerald-50 shadow-sm hover:shadow-md">
                                <div class="w-12 h-12 bg-emerald-100 rounded-2xl flex items-center justify-center text-emerald-700 peer-checked:bg-emerald-600 peer-checked:text-white transition-all">
                                    <i data-lucide="microscope" class="w-6 h-6"></i>
                                </div>
                                <span class="text-lg font-bold text-slate-700">Biologi</span>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input type="checkbox" value="Fizik" class="peer hidden subject-checkbox" onchange="calculatePackage()">
                            <div class="tile-content p-6 bg-white border-2 border-slate-100 rounded-[2rem] flex items-center gap-5 transition-all peer-checked:border-emerald-500 peer-checked:bg-emerald-50 shadow-sm hover:shadow-md">
                                <div class="w-12 h-12 bg-emerald-100 rounded-2xl flex items-center justify-center text-emerald-700 peer-checked:bg-emerald-600 peer-checked:text-white transition-all">
                                    <i data-lucide="zap" class="w-6 h-6"></i>
                                </div>
                                <span class="text-lg font-bold text-slate-700">Fizik</span>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input type="checkbox" value="Kimia" class="peer hidden subject-checkbox" onchange="calculatePackage()">
                            <div class="tile-content p-6 bg-white border-2 border-slate-100 rounded-[2rem] flex items-center gap-5 transition-all peer-checked:border-emerald-500 peer-checked:bg-emerald-50 shadow-sm hover:shadow-md">
                                <div class="w-12 h-12 bg-emerald-100 rounded-2xl flex items-center justify-center text-emerald-700 peer-checked:bg-emerald-600 peer-checked:text-white transition-all">
                                    <i data-lucide="droplets" class="w-6 h-6"></i>
                                </div>
                                <span class="text-lg font-bold text-slate-700">Kimia</span>
                            </div>
                        </label>
                        <label class="relative cursor-pointer group">
                            <input type="checkbox" value="AddMath" class="peer hidden subject-checkbox" onchange="calculatePackage()">
                            <!-- Diubah daripada border-4 kepada border-2 supaya tidak tebal sebelum klik -->
                            <div class="tile-content p-6 bg-white border-2 border-yellow-400 rounded-[2rem] flex items-center gap-5 transition-all peer-checked:border-yellow-600 peer-checked:bg-yellow-50 shadow-xl mandatory-glow">
                                <div class="w-12 h-12 bg-yellow-400 rounded-2xl flex items-center justify-center text-[#003366]">
                                    <i data-lucide="sigma" class="w-6 h-6"></i>
                                </div>
                                <div>
                                    <span class="text-xl font-black text-[#003366] italic">Matematik Tambahan</span>
                                    <p class="text-[10px] text-red-600 font-black uppercase tracking-tighter">*SYARAT UTAMA STEM A & B</p>
                                </div>
                            </div>
                        </label>
                    </div>
                </section>

                <!-- C1: Teknikal -->
                <section class="space-y-6">
                    <div class="flex items-center gap-4">
                        <div class="p-3 bg-blue-600 text-white rounded-2xl shadow-lg">
                            <i data-lucide="cpu" class="w-6 h-6"></i>
                        </div>
                        <h2 class="text-2xl font-black text-slate-800 tracking-tight">STEM C1: Elektif Teknikal</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="c1-list"></div>
                </section>

                <!-- C2: Vokasional -->
                <section class="space-y-6">
                    <div class="flex items-center gap-4">
                        <div class="p-3 bg-purple-600 text-white rounded-2xl shadow-lg">
                            <i data-lucide="wrench" class="w-6 h-6"></i>
                        </div>
                        <h2 class="text-2xl font-black text-slate-800 tracking-tight">STEM C2: Elektif Vokasional</h2>
                    </div>
                    <div class="h-[450px] overflow-y-auto pr-4 custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-4" id="c2-list"></div>
                </section>

                <!-- KSI -->
                <section class="space-y-6">
                    <div class="flex items-center gap-4">
                        <div class="p-3 bg-orange-600 text-white rounded-2xl shadow-lg">
                            <i data-lucide="library" class="w-6 h-6"></i>
                        </div>
                        <h2 class="text-2xl font-black text-slate-800 tracking-tight">KSI: Kemanusiaan & Sastera</h2>
                    </div>
                    <div class="h-[350px] overflow-y-auto pr-4 custom-scrollbar grid grid-cols-1 md:grid-cols-2 gap-4" id="ksi-list"></div>
                </section>
            </div>

            <!-- Bahagian Kanan: Papan Pemuka Analisis -->
            <div class="lg:w-[420px]">
                <div class="sticky top-6 space-y-6">
                    <div id="result-container" class="bg-white p-10 rounded-[3.5rem] border-2 border-slate-100 shadow-[0_40px_70px_-15px_rgba(0,51,102,0.15)] text-center relative overflow-hidden transition-all duration-700">
                        <div id="result-glow" class="absolute inset-0 opacity-0 transition-opacity duration-700"></div>
                        <div class="relative z-10">
                            <div id="result-badge" class="inline-flex items-center gap-2 px-6 py-2.5 rounded-full text-[11px] font-black tracking-widest uppercase mb-10 bg-slate-100 text-slate-500 shadow-sm border border-slate-200">
                                <span class="w-3 h-3 rounded-full bg-slate-300 animate-pulse"></span>
                                Status Analisis
                            </div>
                            <div id="result-icon-box" class="w-36 h-36 mx-auto mb-10 bg-slate-50 rounded-[3rem] flex items-center justify-center text-slate-200 transition-all duration-700 shadow-inner border border-slate-100">
                                <i data-lucide="user-search" class="w-16 h-16"></i>
                            </div>
                            <h2 id="result-name" class="text-3xl font-black text-[#003366] leading-tight mb-4 tracking-tighter uppercase">Profil Pelajar</h2>
                            <p id="result-desc" class="text-slate-500 text-base leading-relaxed mb-10 font-medium opacity-80">Sila pilih sekurang-kurangnya satu subjek elektif untuk mula menjana profil aliran anda.</p>
                            <div id="selected-summary" class="hidden text-left bg-white/60 backdrop-blur-md rounded-[2.5rem] p-8 border border-white shadow-2xl">
                                <h4 class="text-[11px] font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                                    <i data-lucide="list" class="w-4 h-4"></i> Subjek Pilihan:
                                </h4>
                                <ul id="summary-list" class="space-y-3 max-h-56 overflow-y-auto custom-scrollbar"></ul>
                            </div>
                        </div>
                    </div>
                    <button onclick="resetAll()" class="w-full py-6 px-8 bg-[#003366] text-white rounded-[2.5rem] font-black text-sm hover:bg-slate-900 active:scale-95 transition-all flex items-center justify-center gap-4 shadow-2xl">
                        <i data-lucide="trash-2" class="w-5 h-5 text-yellow-400"></i>
                        RESET PILIHAN
                    </button>
                    <!-- Kotak Kuning Penghargaan -->
                    <div class="bg-yellow-400 p-6 rounded-[2.5rem] shadow-xl text-center border-b-8 border-yellow-600">
                         <p class="text-[10px] text-[#003366] font-black uppercase tracking-widest leading-relaxed">
                            APLIKASI INI DIBANGUNKAN OLEH UNIT TMK, SEKTOR PEMBELAJARAN, JPN PAHANG
                         </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- PAPARAN PANDUAN -->
        <div id="view-guide" class="hidden animate-slide-up space-y-8">
            <div class="bg-white p-10 rounded-[3rem] shadow-2xl border-t-8 border-yellow-400">
                <h2 class="text-3xl font-black text-[#003366] mb-8 flex items-center gap-3">
                    <i data-lucide="book-open" class="w-8 h-8 text-yellow-500"></i>
                    Panduan Penentuan Aliran STEM
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <!-- Pakej STEM A -->
                    <div class="p-8 bg-emerald-50 rounded-[2.5rem] border-2 border-emerald-100">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-10 h-10 bg-emerald-600 text-white rounded-full flex items-center justify-center font-black">1</span>
                            <h3 class="text-xl font-black text-emerald-800 uppercase">Pakej STEM A</h3>
                        </div>
                        <p class="text-emerald-700 text-sm mb-4 font-bold">Kriteria: Calon mengambil semua mata pelajaran berikut:</p>
                        <ul class="space-y-2 text-emerald-900 font-semibold text-sm">
                            <li>• Fizik</li>
                            <li>• Kimia</li>
                            <li>• Biologi</li>
                            <li>• Matematik Tambahan</li>
                        </ul>
                    </div>

                    <!-- Pakej STEM B -->
                    <div class="p-8 bg-blue-50 rounded-[2.5rem] border-2 border-blue-100">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-black">2</span>
                            <h3 class="text-xl font-black text-blue-800 uppercase">Pakej STEM B</h3>
                        </div>
                        <p class="text-blue-700 text-sm mb-4 font-bold">Kriteria: Calon mengambil sekurang-kurangnya:</p>
                        <ul class="space-y-2 text-blue-900 font-semibold text-sm">
                            <li class="font-black text-red-600">• Dua (2) mata pelajaran Sains Tulen</li>
                            <li class="font-black text-red-600">• Matematik Tambahan (Mandatori)</li>
                            <li>• Satu (1) mata pelajaran Elektif STEM (C1) atau Elektif lain</li>
                        </ul>
                    </div>

                    <!-- Pakej STEM C -->
                    <div class="p-8 bg-purple-50 rounded-[2.5rem] border-2 border-purple-100">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-10 h-10 bg-purple-600 text-white rounded-full flex items-center justify-center font-black">3</span>
                            <h3 class="text-xl font-black text-purple-800 uppercase">Pakej STEM C</h3>
                        </div>
                        <p class="text-purple-700 text-sm mb-4 font-bold">Kriteria: Calon mengambil sekurang-kurangnya:</p>
                        <ul class="space-y-2 text-purple-900 font-semibold text-sm">
                            <li>• Dua (2) mata pelajaran daripada Kumpulan C1 (Teknikal)</li>
                            <li class="font-black">ATAU</li>
                            <li>• Satu (1) mata pelajaran daripada Kumpulan C2 (Vokasional/Kemahiran)</li>
                        </ul>
                    </div>

                    <!-- Pakej KSI -->
                    <div class="p-8 bg-orange-50 rounded-[2.5rem] border-2 border-orange-100">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-10 h-10 bg-orange-600 text-white rounded-full flex items-center justify-center font-black">4</span>
                            <h3 class="text-xl font-black text-orange-800 uppercase">Pakej KSI</h3>
                        </div>
                        <p class="text-orange-700 text-sm mb-4 font-bold italic">Kemanusiaan & Sastera Ikhtisas</p>
                        <ul class="space-y-2 text-orange-900 font-semibold text-sm">
                            <li>• Calon yang tidak memenuhi syarat Pakej STEM A, B, atau C secara automatik diklasifikasikan ke dalam Pakej KSI.</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-10 p-6 bg-slate-100 rounded-3xl border border-slate-200">
                    <h4 class="font-black text-[#003366] text-sm mb-4 flex items-center gap-2 uppercase">
                        <i data-lucide="info" class="w-4 h-4"></i> Rujukan Rasmi
                    </h4>
                    <ul class="text-[11px] text-slate-500 space-y-2 leading-relaxed italic">
                        <li>• Surat Pekeliling Ikhtisas Kementerian Pendidikan Malaysia Bilangan 6 Tahun 2019</li>
                        <li>• Surat Siaran Kementerian Pendidikan Malaysia Bilangan 1 Tahun 2021</li>
                        <li>• Garis Panduan Penentuan Aliran dan Subjek Tingkatan 4 & 5 (JPN Pahang)</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Senarai Data Elektif
        const c1Subjects = ["Sains Tambahan", "Grafik Komunikasi Teknikal", "Asas Kelestarian", "Pertanian", "Sains Rumah Tangga", "Reka Cipta", "Sains Komputer", "Sains Sukan", "Pengajian Kejuruteraan Awam", "Pengajian Kejuruteraan Mekanikal", "Pengajian Kejuruteraan Elektrik & Elektronik", "Lukisan Kejuruteraan"];
        const c2Subjects = ["Produksi Reka Tanda", "Hiasan Dalaman", "Kerja Paip Domestik", "Pembinaan Domestik", "Pembuatan Perabot", "Reka Bentuk Grafik Digital", "Produksi Multimedia", "Katering dan Penyajian", "Pemprosesan Makanan", "Rekaan dan Jahitan Pakaian", "Penjagaan Muka dan Penggayaan Rambut", "Asuhan dan Pendidikan Awal Kanak-Kanak", "Gerontologi Asas dan Geriatrik", "Pendawaian Domestik", "Menservis Peralatan Elektrik Domestik", "Menservis Automobil", "Kimpalan Arka dan Gas", "Menservis Motosikal", "Menservis Peralatan Penyejukan dan Penyaman Udara", "Landskap dan Nurseri", "Tanaman Makanan", "Akuakultur dan Haiwan Rekreasi"];
        const ksiSubjects = ["Ekonomi", "Perniagaan", "Prinsip Perakaunan", "Geografi", "Pendidikan Seni Visual", "Pendidikan Muzik", "Tasawur Islam", "Pendidikan Al-Quran & As-Sunnah", "Pendidikan Syariah Islamiah", "Usul Al-Din", "Al-Syariah", "Bahasa Arab", "Bible Knowledge", "Kesusasteraan Melayu Komunikatif", "Kesusasteraan Inggeris", "Pengajian Keusahawanan", "Seni Halus 2D", "Seni Halus 3D", "Muzik Komputer", "Penulisan Skrip", "Bahasa Cina", "Bahasa Tamil"];

        function populateLists() {
            const c1Cont = document.getElementById('c1-list');
            const c2Cont = document.getElementById('c2-list');
            const ksiCont = document.getElementById('ksi-list');
            c1Subjects.forEach(s => c1Cont.innerHTML += createItem(s, 'c1', 'blue'));
            c2Subjects.forEach(s => c2Cont.innerHTML += createItem(s, 'c2', 'purple'));
            ksiSubjects.forEach(s => ksiCont.innerHTML += createItem(s, 'ksi', 'orange'));
            lucide.createIcons();
        }

        function createItem(name, type, color) {
            const themes = { blue: 'peer-checked:border-blue-500 peer-checked:bg-blue-50', purple: 'peer-checked:border-purple-500 peer-checked:bg-purple-50', orange: 'peer-checked:border-orange-500 peer-checked:bg-orange-50' };
            return `<label class="relative cursor-pointer group"><input type="checkbox" value="${name}" data-type="${type}" class="peer hidden subject-checkbox" onchange="calculatePackage()"><div class="tile-content p-5 bg-white border-2 border-slate-100 rounded-[1.5rem] flex items-center justify-between transition-all ${themes[color]} hover:border-slate-300"><span class="text-sm font-bold text-slate-700">${name}</span><div class="w-6 h-6 border-2 border-slate-200 rounded-lg flex items-center justify-center peer-checked:bg-current transition-all"><i data-lucide="check" class="w-4 h-4 text-white"></i></div></div></label>`;
        }

        // Fungsi Menukar Tab Paparan
        function switchView(view) {
            const calcView = document.getElementById('view-calculator');
            const guideView = document.getElementById('view-guide');
            const tabCalc = document.getElementById('tab-calculator');
            const tabGuide = document.getElementById('tab-guide');

            if (view === 'calculator') {
                calcView.classList.remove('hidden');
                guideView.classList.add('hidden');
                tabCalc.className = "px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400 transition-all active-tab shadow-lg";
                tabGuide.className = "px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400/30 transition-all text-yellow-400 hover:bg-yellow-400/10";
            } else {
                calcView.classList.add('hidden');
                guideView.classList.remove('hidden');
                tabGuide.className = "px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400 transition-all active-tab shadow-lg";
                tabCalc.className = "px-6 py-3 rounded-full text-sm font-bold border-2 border-yellow-400/30 transition-all text-yellow-400 hover:bg-yellow-400/10";
            }
        }

        // Logik Kiraan Pakej
        function calculatePackage() {
            const checkboxes = document.querySelectorAll('.subject-checkbox');
            const selected = Array.from(checkboxes).filter(cb => cb.checked);
            const values = selected.map(cb => cb.value);
            const hasBio = values.includes('Biologi'), hasFizik = values.includes('Fizik'), hasKimia = values.includes('Kimia'), hasAddMath = values.includes('AddMath');
            const pureScienceCount = [hasBio, hasFizik, hasKimia].filter(Boolean).length;
            const c1Count = selected.filter(cb => cb.dataset.type === 'c1').length, c2Count = selected.filter(cb => cb.dataset.type === 'c2').length;

            const summary = document.getElementById('selected-summary');
            const summaryList = document.getElementById('summary-list');
            if (selected.length > 0) {
                summary.classList.remove('hidden');
                summaryList.innerHTML = selected.map(s => `<li class="text-[12px] font-bold text-white/90 flex items-center gap-2 drop-shadow-sm"><i data-lucide="check-square" class="w-4 h-4 text-yellow-400"></i> ${s.value}</li>`).join('');
                lucide.createIcons();
            } else { summary.classList.add('hidden'); }

            // Logik Algoritma Berasaskan SPI 6/2019
            if (pureScienceCount === 3 && hasAddMath) { updateUI('STEM A', 'Sains Tulen', 'emerald', 'MENGAMBIL SEMUA MATA PELAJARAN: Biologi, Fizik, Kimia DAN Matematik Tambahan.', 'microscope'); }
            else if (pureScienceCount >= 2 && hasAddMath) { updateUI('STEM B', 'Sains Gunaan', 'blue', 'MENGAMBIL DUA (2) MATA PELAJARAN: Sains Tulen DAN Matematik Tambahan DAN sekurang-kurangnya satu (1) elektif lain.', 'cpu'); }
            else if (c1Count >= 2 || c2Count >= 1) { const badge = c1Count >= 2 ? 'STEM C1' : 'STEM C2'; updateUI(badge, 'Teknikal & Vokasional', 'purple', 'Mengambil sekurang-kurangnya dua (2) subjek teknik (C1) atau satu (1) subjek vokasional (C2).', 'wrench'); }
            else if (selected.length > 0) {
                let note = 'Pakej bagi calon yang tidak memenuhi syarat STEM A, B, atau C.';
                if (pureScienceCount > 0 && !hasAddMath) note = 'PERHATIAN: Anda mengambil subjek Sains Tulen tetapi TANPA Matematik Tambahan. Anda secara automatik diklasifikasikan sebagai Pakej KSI.';
                updateUI('KSI', 'Humanities', 'orange', note, 'book-open');
            } else { resetUI(); }
        }

        // Fungsi Kemaskini UI Keputusan
        function updateUI(name, badge, color, desc, icon) {
            const container = document.getElementById('result-container'), rName = document.getElementById('result-name'), rDesc = document.getElementById('result-desc'), rBadge = document.getElementById('result-badge'), rIconBox = document.getElementById('result-icon-box'), glow = document.getElementById('result-glow');
            const palettes = {
                emerald: { bg: 'bg-emerald-700', text: 'text-white', badge: 'bg-emerald-500/30 text-emerald-100', icon: 'bg-emerald-500/20 text-white', glow: 'from-emerald-400 to-emerald-800' },
                blue: { bg: 'bg-blue-700', text: 'text-white', badge: 'bg-blue-500/30 text-blue-100', icon: 'bg-blue-500/20 text-white', glow: 'from-blue-400 to-blue-800' },
                purple: { bg: 'bg-purple-700', text: 'text-white', badge: 'bg-purple-500/30 text-purple-100', icon: 'bg-purple-500/20 text-white', glow: 'from-purple-400 to-purple-800' },
                orange: { bg: 'bg-orange-600', text: 'text-white', badge: 'bg-orange-400/30 text-orange-100', icon: 'bg-orange-400/20 text-white', glow: 'from-orange-400 to-orange-800' }
            };
            const p = palettes[color];
            container.className = `p-10 rounded-[3.5rem] border-0 shadow-2xl text-center relative overflow-hidden transition-all duration-700 ${p.bg} ${p.text}`;
            rName.innerText = `PAKEJ ${name}`; rBadge.innerText = badge;
            rBadge.className = `inline-flex items-center gap-2 px-6 py-2.5 rounded-full text-[11px] font-black tracking-widest uppercase mb-10 ${p.badge} shadow-lg border border-white/10`;
            rDesc.innerText = desc; rDesc.className = "text-base leading-relaxed mb-10 text-white/90 font-medium drop-shadow-sm";
            rName.className = "text-4xl font-black leading-tight mb-4 tracking-tighter text-white drop-shadow-md";
            rIconBox.className = `w-36 h-36 mx-auto mb-10 rounded-[3rem] flex items-center justify-center shadow-2xl transition-all duration-700 ${p.icon}`;
            rIconBox.innerHTML = `<i data-lucide="${icon}" class="w-16 h-16"></i>`;
            glow.className = `absolute inset-0 opacity-40 bg-gradient-to-br ${p.glow} pointer-events-none transition-opacity duration-700`;
            glow.style.opacity = "1";
            lucide.createIcons();
        }

        // Fungsi Set Semula (Reset)
        function resetUI() {
            const container = document.getElementById('result-container');
            container.className = "bg-white p-10 rounded-[3.5rem] border-2 border-slate-100 shadow-[0_40px_70px_-15px_rgba(0,51,102,0.15)] text-center relative overflow-hidden transition-all duration-700";
            document.getElementById('result-name').innerText = "Profil Pelajar";
            document.getElementById('result-name').className = "text-3xl font-black text-[#003366] leading-tight mb-4 tracking-tighter uppercase";
            document.getElementById('result-badge').innerHTML = `<span class="w-3 h-3 rounded-full bg-slate-300 animate-pulse"></span> Status Analisis`;
            document.getElementById('result-badge').className = "inline-flex items-center gap-2 px-6 py-2.5 rounded-full text-[11px] font-black tracking-widest uppercase mb-10 bg-slate-100 text-slate-500 shadow-sm border border-slate-200";
            document.getElementById('result-desc').innerText = "Sila pilih sekurang-kurangnya satu subjek elektif untuk mula menjana profil aliran anda.";
            document.getElementById('result-desc').className = "text-slate-500 text-base leading-relaxed mb-10 font-medium opacity-80";
            document.getElementById('result-icon-box').className = "w-36 h-36 mx-auto mb-10 bg-slate-50 rounded-[3rem] flex items-center justify-center text-slate-200 transition-all duration-700 shadow-inner border border-slate-100";
            document.getElementById('result-icon-box').innerHTML = `<i data-lucide="user-search" class="w-16 h-16"></i>`;
            document.getElementById('result-glow').style.opacity = "0";
            lucide.createIcons();
        }

        function resetAll() {
            document.querySelectorAll('.subject-checkbox').forEach(cb => cb.checked = false);
            calculatePackage();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.onload = populateLists;
    </script>
</body>
</html>
